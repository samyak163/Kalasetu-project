# Changelog 005 — UI/Layout Fixes & Search Improvements

> **Date:** 2026-02-13
> **Commits:** 4
> **Range:** 5c21c9e...6d83487

## What Changed

Fixed multiple UI/layout bugs: dark mode contrast, service modal overflow, location dropdown self-closing, and React Router navigation. Improved search results styling with star ratings and hover effects. Fixed LogRocket React 19 incompatibility.

## Changes

### Frontend — Bug Fixes

#### Dark Mode Tab Contrast
- **Type:** UI Fix
- **What:** Added `dark:text-gray-300` variants to artisan account page tabs. Inactive tabs used `text-gray-700` which was unreadable on dark backgrounds
- **Why:** Tab text disappeared in dark mode
- **Files:** `src/pages/ArtisanAccountPage.jsx`

#### Service Modal Overflow
- **Type:** UI Fix
- **What:** Added `overflow-y-auto` and responsive grid to service creation/edit modal. Used `md` breakpoint which caused content overflow on tablets
- **Why:** Modal content was cut off on tablet-sized screens
- **Files:** `src/components/profile/tabs/ServicesTab.jsx`

#### Location Dropdown Self-Closing
- **Type:** UI Fix
- **What:** Added `stopPropagation` to location dropdown click handler. Clicks inside the dropdown were propagating to the document listener which immediately closed it
- **Why:** Users couldn't interact with the location dropdown — it closed on any click
- **Files:** `src/components/Header.jsx`

#### React Router Navigation for Profile Link
- **Type:** Bug Fix
- **What:** Replaced `globalThis.location.href` with `useNavigate()` for artisan profile link in header
- **Why:** Full page reload caused auth state race conditions — user would briefly appear logged out
- **Files:** `src/components/Header.jsx`

### Frontend — Enhancements

#### Search Results Styling Overhaul
- **Type:** Enhancement
- **What:** Added StarRating component for artisan ratings in search results. Improved responsive design with hover effects, transitions, optimized card layout and spacing (+130 lines rewrite)
- **Why:** Search results cards were plain with no visual appeal or rating display
- **Files:** `src/pages/SearchResults.jsx`, `controllers/searchController.js`

#### Geolocation in Search Filters
- **Type:** Enhancement
- **What:** Added "Use my location" button to advanced search filters using browser geolocation API
- **Why:** Location-based search only existed in the header — the search page's own filters had no geolocation option
- **Files:** `src/components/search/AdvancedFilters.jsx`

### Frontend — Compatibility

#### LogRocket React 19 Fix
- **Type:** Compatibility Fix
- **What:** Wrapped `setupLogRocketReact` in try-catch. Core LogRocket continues if React wrapper fails
- **Why:** `logrocket-react@6.0.3` is incompatible with React 19 — threw errors on initialization blocking LogRocket entirely
- **Files:** `src/lib/logrocket.js`

## Impact

| Area | Change |
|------|--------|
| Customer | Working location dropdown, better search results with ratings, geolocation search, no flash-logout on navigation |
| Artisan | Readable tabs in dark mode, working service modal on tablets |
| Admin | None |
| Developer | LogRocket works despite React 19 wrapper incompatibility |
